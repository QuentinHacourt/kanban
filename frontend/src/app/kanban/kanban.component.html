<h1>Kanban Board</h1>

<div class="row">
  <div class="col border-end">
    <h3>Backlog</h3>
    <div class="list-group" *ngFor="let story of stories">
      <div *ngIf="story.stat == 'backlog'">
        <a
          (click)="selectStory(story)"
          class="
            list-group-item
            d-flex
            justify-content-between
            align-items-start
            my-1
          "
          data-bs-toggle="offcanvas"
          href="#offcanvasStory"
          role="button"
          aria-controls="offcanvasStory"
        >
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ story.title }}</div>
            {{ story.developer_name }}
          </div>
          <span class="badge bg-primary rounded-pill">{{ story.time }}</span>
        </a>
      </div>
    </div>
  </div>

  <div class="col border-end">
    <h3>To Do</h3>
    <div class="list-group" *ngFor="let story of stories">
      <div *ngIf="story.stat == 'to do'">
        <a
          (click)="selectStory(story)"
          class="
            list-group-item
            d-flex
            justify-content-between
            align-items-start
            my-1
          "
          data-bs-toggle="offcanvas"
          href="#offcanvasStory"
          role="button"
          aria-controls="offcanvasStory"
        >
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ story.title }}</div>
            {{ story.developer_name }}
          </div>
          <span class="badge bg-primary rounded-pill">{{ story.time }}</span>
        </a>
      </div>
    </div>
  </div>
  <div class="col border-end">
    <h3>Doing</h3>
    <div class="list-group" *ngFor="let story of stories">
      <div *ngIf="story.stat == 'doing'">
        <a
          (click)="selectStory(story)"
          class="
            list-group-item
            d-flex
            justify-content-between
            align-items-start
            my-1
          "
          data-bs-toggle="offcanvas"
          href="#offcanvasStory"
          role="button"
          aria-controls="offcanvasStory"
        >
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ story.title }}</div>
            {{ story.developer_name }}
          </div>
          <span class="badge bg-primary rounded-pill">{{ story.time }}</span>
        </a>
      </div>
    </div>
  </div>
  <div class="col">
    <h3>Done</h3>
    <div class="list-group" *ngFor="let story of stories">
      <div *ngIf="story.stat == 'done'">
        <a
          (click)="selectStory(story)"
          class="
            list-group-item
            d-flex
            justify-content-between
            align-items-start
            my-1
          "
          data-bs-toggle="offcanvas"
          href="#offcanvasStory"
          role="button"
          aria-controls="offcanvasStory"
        >
          <div class="ms-2 me-auto">
            <div class="fw-bold">{{ story.title }}</div>
            {{ story.developer_name }}
          </div>
          <span class="badge bg-primary rounded-pill">{{ story.time }}</span>
        </a>
      </div>
    </div>
  </div>
</div>

<div class="mt-3">
  <button class="btn btn-primary" routerLink="/create-story">New Story</button>
</div>

<div
  class="offcanvas offcanvas-end"
  tabindex="-1"
  id="offcanvasStory"
  aria-labelledby="offcanvasStoryLabel"
>
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasStoryLabel">
      {{ selectedStory.title }}
    </h5>
    <button
      type="button"
      class="btn-close text-reset"
      data-bs-dismiss="offcanvas"
      aria-label="Close"
    ></button>
  </div>
  <div class="offcanvas-body">
    <p>Description: {{ selectedStory.description }}</p>
    <p>Status: {{ selectedStory.stat }}</p>
    <p>Estimated Time: {{ selectedStory.time }}</p>
    <p>Developer Name: {{ selectedStory.developer_name }}</p>
    <p>Project Name: {{ selectedStory.project_name }}</p>
    <button
      class="btn btn-primary mt-3 me-3"
      routerLink="/story/{{ selectedStory.id }}"
    >
      Edit
    </button>
    <button class="btn btn-danger mt-3" (click)="delete(selectedStory)">
      Delete
    </button>
  </div>
</div>
